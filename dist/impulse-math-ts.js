(()=>{"use strict";var r={d:(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},o:(r,t)=>Object.prototype.hasOwnProperty.call(r,t),r:r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e(r)}function o(r,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,n(o.key),o)}}function n(r){var t=function(r,t){if("object"!=e(r)||!r)return r;var o=r[Symbol.toPrimitive];if(void 0!==o){var n=o.call(r,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"==e(t)?t:t+""}r.r(t),r.d(t,{ComputationCPU:()=>Q,ComputationMultiCore:()=>d,Matrix:()=>or,getComputation:()=>X,im2col:()=>nr,maxpool:()=>ar,round:()=>ur,setComputation:()=>W});var a=function(){return r=function r(){var t,e,o;!function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t=this,o={},(e=n(e="kernels"))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o},t=[{key:"addKernel",value:function(r,t){return this.kernels[r]=t,this}},{key:"execute",value:function(r){if(!this.kernels[r])throw new Error("Kernel '".concat(r,"' not exists."));for(var t=arguments.length,e=new Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return this.kernels[r].apply(null,e)}}],t&&o(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,t}(),u=function(r,t){};function i(r){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},i(r)}function c(r,t,e){return t=s(t),function(r,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r)}(r,f()?Reflect.construct(t,e||[],s(r).constructor):t.apply(r,e))}function f(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(r){}return(f=function(){return!!r})()}function s(r){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s(r)}function l(r,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},l(r,t)}var d=function(r){function t(){var r;return function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=c(this,t)).addKernel("dot",u),r}return function(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&l(r,t)}(t,r),e=t,Object.defineProperty(e,"prototype",{writable:!1}),e;var e}(a),v=function(r,t){if(r.cols!==t.rows)throw new Error("DIMENSIONS error. m1.cols ".concat(r.rows," ").concat(r.cols," !== m2.rows ").concat(t.rows," ").concat(t.cols,"."));for(var e=[],o=0;o<r.rows;++o){e[o]=new Array(t.cols);for(var n=0;n<t.cols;++n){e[o][n]=0;for(var a=0;a<r.cols;++a)r.data&&t.data&&(e[o][n]+=r.data[o][a]*t.data[a][n])}}return new or(r.rows,t.cols,e)},y=function(r){for(var t=[],e=0;e<r.cols;++e){t[e]=new Array(r.rows);for(var o=0;o<r.rows;++o)t[e][o]=r.data[o][e]}return new or(r.cols,r.rows,t)},p=function(r,t){for(var e=[],o=0;o<t.rows;o+=1){e[o]=new Array(t.cols);for(var n=0;n<t.cols;n+=1)e[o][n]=t.data[o][n]>0?1:0}return new or(t.rows,t.cols,e)},w=function(r,t){if("number"==typeof t){for(var e=[],o=0;o<r.rows;o+=1){e[o]=[];for(var n=0;n<r.cols;n+=1)e[o][n]=r.data[o][n]+t}return or.from(e)}if(t instanceof or){if(t.rows!==r.rows||t.cols!==r.cols)throw new Error("Dimention error: rows (x: ".concat(r.rows,", y: ").concat(r.cols,") !== (x: ").concat(t.rows,", y: ").concat(t.cols,")"));for(var a=[],u=0;u<r.rows;u+=1){a[u]=[];for(var i=0;i<r.cols;i+=1)a[u][i]=r.data[u][i]+t.data[u][i]}return or.from(a)}},h=function(r,t){if("number"==typeof t){for(var e=[],o=0;o<r.rows;o+=1){e[o]=[];for(var n=0;n<r.cols;n+=1)e[o][n]=r.data[o][n]-t}return or.from(e)}if(r.rows!==t.rows||r.cols!==t.cols)throw new Error("Dimensions error: ".concat(r.rows,", ").concat(r.cols," !== ").concat(t.rows,", ").concat(t.cols));for(var a=[],u=0;u<r.rows;u+=1){a[u]=[];for(var i=0;i<r.cols;i+=1)a[u][i]=r.data[u][i]-t.data[u][i]}return or.from(a)},m=function(r,t){if("number"==typeof t){for(var e=[],o=0;o<r.rows;o+=1){e[o]=[];for(var n=0;n<r.cols;n+=1)e[o][n]=r.data[o][n]*t}return or.from(e)}if(t.rows!==r.rows||r.cols!==t.cols)throw new Error("Dimension error: ".concat(r.shape()," !== ").concat(t.shape()));for(var a=[],u=0;u<r.rows;u+=1){a[u]=[];for(var i=0;i<r.cols;i+=1)a[u][i]=r.data[u][i]*t.data[u][i]}return or.from(a)},b=function(r,t){if("number"==typeof t){for(var e=[],o=0;o<r.rows;o+=1){e[o]=[];for(var n=0;n<r.cols;n+=1)e[o][n]=r.data[o][n]/t}return or.from(e)}if(t.rows!==r.rows||t.cols!==r.cols)throw new Error("Dimensions error (".concat(r.rows,", ").concat(r.cols,") !== (").concat(t.rows,", ").concat(t.cols,")"));for(var a=[],u=0;u<r.rows;u+=1){a[u]=[];for(var i=0;i<r.cols;i+=1)a[u][i]=r.data[u][i]/t.data[u][i]}return or.from(a)},x=function(r){for(var t=[],e=0;e<r.rows;e+=1){t[e]=[];for(var o=0;o<r.cols;o+=1)t[e][o]=1-r.data[e][o]}return or.from(t)},k=function(r){for(var t=[],e=0;e<r.rows;e+=1){t[e]=[];for(var o=0;o<r.cols;o+=1)t[e][o]=Math.log(r.data[e][o]+1e-8)}return or.from(t)},O=function(r,t){for(var e=[],o=0;o<r.rows;o+=1){e[o]=[];for(var n=0;n<r.cols;n+=1)e[o][n]=Math.pow(r.data[o][n],t)}return or.from(e)},g=function(r){for(var t=[],e=0;e<r.rows;e+=1){t[e]=[];for(var o=0;o<r.cols;o+=1)t[e][o]=Math.exp(r.data[e][o]+1e-8)}return or.from(t)},S=function(r){for(var t=[],e=0;e<r.rows;e+=1){t[e]=[];for(var o=0;o<r.cols;o+=1)t[e][o]=Math.sqrt(r.data[e][o]+1e-8)}return or.from(t)},j=function(r,t){for(var e=[],o=0;o<r.rows;o+=1){e[o]=[];for(var n=0;n<r.cols;n+=1)e[o][n]=t-r.data[o][n]}return or.from(e)},K=function(r,t){for(var e=[],o=0;o<r.rows;o+=1){e[o]=[];for(var n=0;n<r.cols;n+=1)e[o][n]=Math.max(r.data[o][n],t)}return or.from(e)},M=function(r,t){for(var e=[],o=0;o<r.rows;o+=1){e[o]=[];for(var n=0;n<r.cols;n+=1)e[o][n]=Math.min(r.data[o][n],t)}return or.from(e)},P=function(r){for(var t=[],e=0;e<r.rows;e+=1){t[e]=[];for(var o=0;o<r.cols;o+=1)t[e][o]=1}return or.from(t)},E=function(r){for(var t=[],e=0;e<r.rows;e+=1){t[e]=[];for(var o=0;o<r.cols;o+=1)t[e][o]=0}return or.from(t)},C=function(r,t){for(var e=[],o=0;o<r.rows;o+=1){e[o]=[];for(var n=0;n<r.cols;n+=1)e[o][n]=(4*Math.random()-2)*Math.sqrt(2/t)}return or.from(e)},_=function(r,t){for(var e=[],o=0;o<r.rows;o+=1){e[o]=[];for(var n=0;n<r.cols;n+=1)e[o][n]=t/r.data[o][n]}return or.from(e)},T=function(r){for(var t=-1/0,e=0;e<r.rows;e+=1)for(var o=0;o<r.cols;o+=1)t=Math.max(r.data[e][o],t);return t},D=function(r){for(var t=[],e=0;e<r.rows;e+=1){t[e]=[];for(var o=0;o<r.cols;o+=1)t[e][o]=Math.abs(r.data[e][o])}return or.from(t)},R=function(r){for(var t=0,e=r.rows*r.cols,o=0;o<r.rows;o+=1)for(var n=0;n<r.cols;n+=1)t+=r.data[o][n];return t/e},I=function(r){for(var t=0,e=0;e<r.rows;e+=1)for(var o=0;o<r.cols;o+=1)t+=r.data[e][o];return t},A=function(r){for(var t=[[]],e=0;e<r.rows;e+=1){for(var o=0,n=0;n<r.cols;n+=1)o+=r.data[e][n];t[0].push(o)}return new or(1,r.rows,t)},N=function(r){for(var t=[],e=r.transpose(),o=0;o<e.rows;o+=1){t[o]=[0];for(var n=0;n<e.cols;n+=1)t[o][0]+=e.data[o][n]}return new or(r.cols,1,t)},q=function(r,t,e){if(1===t&&1===r.cols&&e>1){for(var o=[],n=0;n<r.rows;n+=1){o[n]=[];for(var a=0;a<e;a+=1)o[n][a]=r.data[n][0]}return or.from(o)}if(1===e&&1===r.rows&&t>1){for(var u=[],i=0;i<t;i+=1){u[i]=[];for(var c=0;c<r.cols;c+=1)u[i][c]=r.data[0][c]}return or.from(u)}return r},B=function(r,t){for(var e=-1,o=-1/0,n=0;n<r.rows;n+=1)r.data&&r.data[n][t]>o&&(o=r.data[n][t],e=n);return e},Z=function(r,t){for(var e=-1,o=-1/0,n=0;n<r.cols;n+=1)r.data[t][n]>o&&(o=r.data[t][n],e=n);return e},F=function(r,t){for(var e=[],o=0;o<r.cols;o+=1)e[o]=[r.data[t][o]];return new or(r.cols,1,e)},z=function(r,t){for(var e=[],o=0;o<r.rows;o+=1)e[o]=[r.data[o][t]];return new or(r.rows,1,e)},U=function(r){for(var t=[],e=0,o=0;o<r.rows;o+=1)for(var n=0;n<r.cols;n+=1)t[e]=[],t[e++][0]=r.data[o][n];return or.from(t)};function $(r){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$(r)}function G(r,t,e){return t=J(t),function(r,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r)}(r,H()?Reflect.construct(t,e||[],J(r).constructor):t.apply(r,e))}function H(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(r){}return(H=function(){return!!r})()}function J(r){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J(r)}function L(r,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,t){return r.__proto__=t,r},L(r,t)}var Q=function(r){function t(){var r;return function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=G(this,t)).addKernel("dot",v),r.addKernel("transpose",y),r.addKernel("reluBackpropagation",p),r.addKernel("add",w),r.addKernel("subtract",h),r.addKernel("multiply",m),r.addKernel("divide",b),r.addKernel("minusOne",x),r.addKernel("subtractNumberFrom",j),r.addKernel("log",k),r.addKernel("exp",g),r.addKernel("pow",O),r.addKernel("sqrt",S),r.addKernel("setMin",K),r.addKernel("setMax",M),r.addKernel("setOnes",P),r.addKernel("setZeros",E),r.addKernel("setRandom",C),r.addKernel("fraction",_),r.addKernel("max",T),r.addKernel("abs",D),r.addKernel("mean",R),r.addKernel("sum",I),r.addKernel("rowwiseSum",A),r.addKernel("colwiseSum",N),r.addKernel("replicate",q),r.addKernel("colMaxCoeffIndex",B),r.addKernel("rowMaxCoeffIndex",Z),r.addKernel("row",F),r.addKernel("col",z),r.addKernel("rollToColMatrix",U),r}return function(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&L(r,t)}(t,r),e=t,Object.defineProperty(e,"prototype",{writable:!1}),e;var e}(a),V=new Q,W=function(r){V=r},X=function(){return V};function Y(r){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Y(r)}function rr(r,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,er(o.key),o)}}function tr(r,t,e){return(t=er(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function er(r){var t=function(r,t){if("object"!=Y(r)||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var o=e.call(r,"string");if("object"!=Y(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"==Y(t)?t:t+""}var or=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),tr(this,"rows",0),tr(this,"cols",0),tr(this,"data",null),this.resize(t,e),o&&this.generateData(o)}return t=r,e=[{key:"resize",value:function(r,t){this.rows=r,this.cols=t,this.data=new Array(this.rows);for(var e=0;e<this.rows;e+=1)this.data[e]=new Array(this.cols);return this}},{key:"generateData",value:function(r){for(var t=[],e=0;e<this.rows;e+=1)t[e]=new Array(this.cols);for(var o=0;o<this.cols;o+=1)for(var n=0;n<this.rows;n+=1)"number"==typeof r[n]?t[n][o]=r[n]:"string"==typeof r[n][o]&&/^[0-9.]+$/.test(String(r[n][o]))?t[n][o]=Number(r[n][o]):t[n][o]=r[n][o];return this.data=t,this}},{key:"sum",value:function(){return X().execute("sum",this)}},{key:"colwiseSum",value:function(){return X().execute("colwiseSum",this)}},{key:"rowwiseSum",value:function(){return X().execute("rowwiseSum",this)}},{key:"flatten",value:function(){for(var r=[],t=0;t<this.rows;t+=1)for(var e=0;e<this.cols;e+=1)r.push(this.data[t][e]);return r}},{key:"replicate",value:function(r,t){return X().execute("replicate",this,r,t)}},{key:"transpose",value:function(){return X().execute("transpose",this)}},{key:"colMaxCoeffIndex",value:function(r){return X().execute("colMaxCoeffIndex",this,r)}},{key:"rowMaxCoeffIndex",value:function(r){return X().execute("rowMaxCoeffIndex",this,r)}},{key:"col",value:function(r){return X().execute("col",this,r)}},{key:"row",value:function(r){return X().execute("row",this,r)}},{key:"sigmoid",value:function(){return this.multiply(-1).exp().add(1).fraction(1)}},{key:"rollToColMatrix",value:function(){return X().execute("rollToColMatrix",this)}},{key:"abs",value:function(){return X().execute("abs",this)}},{key:"mean",value:function(){return X().execute("mean",this)}},{key:"max",value:function(){return X().execute("max",this)}},{key:"setMax",value:function(r){return X().execute("setMax",this,r)}},{key:"setMin",value:function(r){return X().execute("setMin",this,r)}},{key:"setZeros",value:function(){return X().execute("setZeros",this)}},{key:"setOnes",value:function(){return X().execute("setOnes",this)}},{key:"setRandom",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return X().execute("setRandom",this,r)}},{key:"fraction",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return X().execute("fraction",this,r)}},{key:"sqrt",value:function(){return X().execute("sqrt",this)}},{key:"dot",value:function(r){return X().execute("dot",this,r)}},{key:"multiply",value:function(r){return X().execute("multiply",this,r)}},{key:"subtract",value:function(r){return X().execute("subtract",this,r)}},{key:"forEach",value:function(t){for(var e=[],o=0;o<this.rows;o+=1){e[o]=[];for(var n=0;n<this.cols;n+=1)e[o][n]=t(this.data[o][n])}return r.from(e)}},{key:"shape",value:function(){return[this.rows,this.cols]}},{key:"divide",value:function(r){return X().execute("divide",this,r)}},{key:"minusOne",value:function(){return X().execute("subtractNumberFrom",this,-1)}},{key:"subtractNumberFrom",value:function(r){return X().execute("subtractNumberFrom",this,r)}},{key:"add",value:function(r){return X().execute("add",this,r)}},{key:"log",value:function(){return X().execute("log",this)}},{key:"tanh",value:function(){return this.exp().subtract(this.multiply(-1).exp()).divide(this.exp().add(this.multiply(-1).exp()))}},{key:"softmax",value:function(){var r=this.max()-1e-8;return this.subtract(r).exp().divide(this.rowwiseSum().replicate(this.cols,1).transpose())}},{key:"exp",value:function(){return X().execute("exp",this)}},{key:"pow",value:function(r){return X().execute("pow",this,r)}},{key:"value",value:function(r,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return void 0===e?this.data[r][t]:(this.data[r][t]=e,this)}},{key:"copy",value:function(){return r.from(this.data)}},{key:"concat",value:function(r){for(var t=0;t<r.rows;t+=1)this.data.push(r.data[t]);return this}}],o=[{key:"from",value:function(t){var e;return new r(t.length,(null===(e=t[0])||void 0===e?void 0:e.length)||0,t)}}],e&&rr(t.prototype,e),o&&rr(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,o}(),nr=function(r,t,e,o,n,a,u,i,c,f){for(var s=0,l=new or(((o-a+2*i)/f+1)*((e-n+2*u)/c+1),a*n*t).setZeros(),d=-u;d+n<=e+u;d+=c)for(var v=-i;v+a<=o+i;v+=f){for(var y=0,p=0;p<t;p++)for(var w=e*o*p,h=0;h<n;h++)for(var m=0;m<a;m++)d+h>=0&&v+m>=0&&v+m<o&&d+h<e&&(l.data[s][y]=r.data[(h+d)*o+v+m+w][0]),y++;s++}return l},ar=function(r,t,e,o,n,a,u,i){for(var c=(o-a)/i+1,f=(e-n)/u+1,s=0,l=new or(c*f*t,1).setZeros(),d=0;d+n<=e;d+=u)for(var v=0;v+a<=o;v+=i){for(var y=0;y<t;y++){for(var p=-1/0,w=e*o*y,h=c*f*y,m=0;m<n;m++)for(var b=0;b<a;b++)p=Math.max(p,r.data[w+(m+d)*o+v+b][0]);l.data[h+s][0]=p}s++}return l},ur=function(r,t){return Math.round((r+223e-18)*Math.pow(10,t))/Math.pow(10,t)};module.exports=t})();
//# sourceMappingURL=impulse-math-ts.js.map